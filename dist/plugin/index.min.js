!async function(){let e,t=document.getElementById("sl-of-bug"),n=document.getElementById("sl-of-idea"),i=document.getElementById("sl-of-help"),a=document.getElementById("sl-of-back"),o=document.getElementById("sl-of-id"),s=document.getElementById("sl-of-content"),d=document.getElementById("sl-of-form"),r=document.getElementById("sl-of-submit"),l=document.getElementById("sl-of-screenshot"),c=document.getElementById("sl-of-textarea"),u=document.getElementById("sl-of-confirmation"),g=document.getElementById("sl-of-warning"),m=document.getElementById("sl-of-widget"),y="https://discord.com/api/webhooks/"+window.OPEN_FEEDBACK_CONFIG.discord||null;function f(t){switch(console.log("Event"),console.log(t),t.target.id){case"sl-of-bug":o.innerText="Report an issue",destinationEmoji=":bug:",e="Bug report";break;case"sl-of-idea":o.innerText="Make a suggestion",destinationEmoji=":bulb:",e="Suggestion";break;case"sl-of-help":o.innerText="How can we help you?",destinationEmoji=":question:",e="Support request";break;default:return}s.style.display="none",d.style.display="flex",a.style.opacity=1}async function v(){const e=screen.width*(window.devicePixelRatio||1),t=screen.height*(window.devicePixelRatio||1),n=[];let i;try{i=await function(e){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return navigator.mediaDevices.getDisplayMedia(e);if(navigator.getDisplayMedia)return navigator.getDisplayMedia(e);if(navigator.webkitGetDisplayMedia)return navigator.webkitGetDisplayMedia(e);if(navigator.mozGetDisplayMedia)return navigator.mozGetDisplayMedia(e);throw new Error("getDisplayMedia is not defined")}({audio:!1,video:{width:e,height:t,frameRate:1}})}catch(e){n.push(e)}if(navigator.userAgent.indexOf("Electron")>=0)try{i=await function(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);if(navigator.getUserMedia)return navigator.getUserMedia(e);if(navigator.webkitGetUserMedia)return navigator.webkitGetUserMedia(e);if(navigator.mozGetUserMedia)return navigator.mozGetUserMedia(e);throw new Error("getUserMedia is not defined")}({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",minWidth:e,maxWidth:e,minHeight:t,maxHeight:t}}})}catch(e){n.push(e)}if(n.length&&(console.debug(...n),!i))throw n[n.length-1];return i}async function p(){const e=await v(),t=document.createElement("video"),n=await new Promise((n,i)=>{t.onloadedmetadata=()=>{t.play(),t.pause();const e=document.createElement("canvas");e.width=t.videoWidth,e.height=t.videoHeight;e.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight),n(e)},t.srcObject=e});if(e.getTracks().forEach((function(e){e.stop()})),null==n)throw new Error("Cannot take canvas screenshot");return n}function h(e){return new Promise((t,n)=>{e.toBlob(e=>t(e),"image/jpeg",.95)})}t.addEventListener("click",f),n.addEventListener("click",f),i.addEventListener("click",f),a.addEventListener("click",(function(){d.style.display="none",s.style.display="flex",a.style.opacity=0,o.innerText="What's on your mind?",g.innerText="",g.style.display="none"})),r.addEventListener("click",(function(){if(!c.value)return g.innerText="A message must be provided to submit!",void(g.style.display="flex");g.style.display="none";var t=new XMLHttpRequest;t.open("POST",y),t.setRequestHeader("Content-type","application/json");var n=(new Date).getTimezoneOffset(),i=new Date;i.setMinutes(i.getMinutes()+n);i.setMinutes(i.getMinutes()+-240);var o={content:"\n**New "+e+" from Open Feedback"+destinationEmoji+"**\n``` Sent at: "+i.toString()+"\n "+e+": "+c.value+"```\n"};t.send(JSON.stringify(o)),u.innerText=e+" sent successfully, you can expect a reply within 24 hours.",u.style.display="flex",d.style.display="none",a.style.opacity=0,setTimeout((function(){m.style.display="none"}),3e3)})),l.addEventListener("click",(async function(){return h(await p())}))}();